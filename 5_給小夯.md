# 設定檔修改記錄 (給小夯)

這份文件記錄了 `main.php` 與 `params.php` 的機敏資訊修改，以及對應到 `.env` 環境變數的對照表。

所有的機敏設定現在都必須在 **專案根目錄下的 `.env` 檔案** 中設定，請勿直接修改 PHP 程式碼。

## 1.主要設定檔 (`www/protected/config/main.php`)

以下設定值已從程式碼中移除，改由讀取 `.env`：

| 設定項目 (Component/Key) | 原本位置/寫法 | 新的 `.env` 變數名稱 | 備註 |
| :--- | :--- | :--- | :--- |
| **資料庫主機** | `db` -> `connectionString` | `DB_HOST` | 預設 `localhost` |
| **資料庫名稱** | `db` -> `connectionString` | `DB_NAME` | 預設 `juso1326_ota` |
| **資料庫帳號** | `db` -> `username` | `DB_USER` | 預設 `juso1326_work` |
| **資料庫密碼** | `db` -> `password` | `DB_PASSWORD` | **必填** (無預設值) |
| **SMTP 主機** | `Smtpmail` -> `Host` | `SMTP_HOST` | 預設 `smtp.gmail.com` |
| **SMTP Port** | `Smtpmail` -> `Port` | `SMTP_PORT` | 預設 `587` |
| **SMTP 帳號** | `Smtpmail` -> `Username` | `SMTP_USER` | 預設 `application.oat@gmail.com` |
| **SMTP 密碼** | `Smtpmail` -> `Password` | `SMTP_PASSWORD` | **必填** (無預設值) |
| **Yii 工具密碼** | `modules` -> `gii` -> `password` | `GII_PASSWORD` | **必填** (若無設定則 fallback 到舊密碼) |

---

## 2. 參數設定檔 (`www/protected/config/params.php`)

以下環境相關路徑與設定已抽出：

| 設定項目 (Param Key) | 原本位置/寫法 | 新的 `.env` 變數名稱 | 備註 |
| :--- | :--- | :--- | :--- |
| **應用程式絕對路徑** | `dirname` | `APP_DIRNAME` | 用於指定實體路徑 |
| **管理員 Email** | `adminEmail` | `ADMIN_EMAIL` | 系統錯誤通知信箱 |

---

## 3. `.env` 檔案範例

請確保伺服器上的 `.env` 檔案包含以下內容 (範例值)：

```ini
# --- 資料庫設定 ---
DB_HOST=localhost
DB_NAME=juso1326_ota
DB_USER=juso1326_work
DB_PASSWORD=你的資料庫密碼

# --- 應用程式設定 ---
APP_DIRNAME=/var/www/html/www
ADMIN_EMAIL=info@onearttaipei.com

# --- 安全性 ---
GII_PASSWORD=你的YII密碼

# --- 郵件伺服器 ---
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=application.oat@gmail.com
SMTP_PASSWORD=你的應用程式密碼
```
